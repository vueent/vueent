<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Validate mixin | VueEnt</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/vueent/img/logo.png">
    <meta name="description" content=" A library for building scalable Vue.js applications">
    
    <link rel="preload" href="/vueent/assets/css/0.styles.7cf9ca21.css" as="style"><link rel="preload" href="/vueent/assets/js/app.f7b1e8a0.js" as="script"><link rel="preload" href="/vueent/assets/js/2.3fc2d328.js" as="script"><link rel="preload" href="/vueent/assets/js/1.4e5a82d0.js" as="script"><link rel="preload" href="/vueent/assets/js/35.b3861d2b.js" as="script"><link rel="preload" href="/vueent/assets/js/6.18f065b5.js" as="script"><link rel="prefetch" href="/vueent/assets/js/10.762141ab.js"><link rel="prefetch" href="/vueent/assets/js/11.7e8955b6.js"><link rel="prefetch" href="/vueent/assets/js/12.235e09cf.js"><link rel="prefetch" href="/vueent/assets/js/13.dae23f73.js"><link rel="prefetch" href="/vueent/assets/js/14.5b380f7b.js"><link rel="prefetch" href="/vueent/assets/js/15.a0ed429d.js"><link rel="prefetch" href="/vueent/assets/js/16.87295b4d.js"><link rel="prefetch" href="/vueent/assets/js/17.ae823da8.js"><link rel="prefetch" href="/vueent/assets/js/18.1832bb00.js"><link rel="prefetch" href="/vueent/assets/js/19.0741f0b9.js"><link rel="prefetch" href="/vueent/assets/js/20.e504fccc.js"><link rel="prefetch" href="/vueent/assets/js/21.60375cff.js"><link rel="prefetch" href="/vueent/assets/js/22.b29937ab.js"><link rel="prefetch" href="/vueent/assets/js/23.491b1736.js"><link rel="prefetch" href="/vueent/assets/js/24.ac8a5c30.js"><link rel="prefetch" href="/vueent/assets/js/25.ef37d288.js"><link rel="prefetch" href="/vueent/assets/js/26.9d220ead.js"><link rel="prefetch" href="/vueent/assets/js/27.2e23ba10.js"><link rel="prefetch" href="/vueent/assets/js/28.6a00952c.js"><link rel="prefetch" href="/vueent/assets/js/29.cb0de0a9.js"><link rel="prefetch" href="/vueent/assets/js/3.5d0cadfc.js"><link rel="prefetch" href="/vueent/assets/js/30.ef915bbe.js"><link rel="prefetch" href="/vueent/assets/js/31.cde03d5d.js"><link rel="prefetch" href="/vueent/assets/js/32.826a692b.js"><link rel="prefetch" href="/vueent/assets/js/33.23b33b3f.js"><link rel="prefetch" href="/vueent/assets/js/34.6b065533.js"><link rel="prefetch" href="/vueent/assets/js/4.55416c91.js"><link rel="prefetch" href="/vueent/assets/js/5.e6a18841.js"><link rel="prefetch" href="/vueent/assets/js/7.80825203.js"><link rel="prefetch" href="/vueent/assets/js/vendors~docsearch.dea578ad.js">
    <link rel="stylesheet" href="/vueent/assets/css/0.styles.7cf9ca21.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vueent/" class="home-link router-link-active"><img src="/vueent/img/logo.png" alt="VueEnt" class="logo"> <span class="site-name can-hide">VueEnt</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vueent/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/vueent/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="/vueent/guide/reactive.html" class="nav-link">
  Reactive
</a></div><div class="nav-item"><a href="/vueent/guide/core.html" class="nav-link">
  Core
</a></div><div class="nav-item"><a href="/vueent/guide/mix-models.html" class="nav-link">
  Mix Models
</a></div><div class="nav-item"><a href="/vueent/guide/store.html" class="nav-link">
  Store
</a></div> <a href="https://github.com/vueent/vueent" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/vueent/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/vueent/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="/vueent/guide/reactive.html" class="nav-link">
  Reactive
</a></div><div class="nav-item"><a href="/vueent/guide/core.html" class="nav-link">
  Core
</a></div><div class="nav-item"><a href="/vueent/guide/mix-models.html" class="nav-link">
  Mix Models
</a></div><div class="nav-item"><a href="/vueent/guide/store.html" class="nav-link">
  Store
</a></div> <a href="https://github.com/vueent/vueent" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Guide</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Mix-Models</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vueent/guide/mix-models.html" class="sidebar-link">Introduction</a></li><li><a href="/vueent/guide/base-model.html" class="sidebar-link">Base model</a></li><li><a href="/vueent/guide/save-mixin.html" class="sidebar-link">Save mixin</a></li><li><a href="/vueent/guide/private-and-public-types.html" class="sidebar-link">Private and public types</a></li><li><a href="/vueent/guide/rollback-mixin.html" class="sidebar-link">Rollback mixin</a></li><li><a href="/vueent/guide/validate-mixin.html" aria-current="page" class="active sidebar-link">Validate mixin</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vueent/guide/validate-mixin.html#validation-pattern" class="sidebar-link">Validation pattern</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vueent/guide/validate-mixin.html#validation-rule" class="sidebar-link">Validation rule</a></li><li class="sidebar-sub-header"><a href="/vueent/guide/validate-mixin.html#validation-rules-object" class="sidebar-link">Validation rules object</a></li><li class="sidebar-sub-header"><a href="/vueent/guide/validate-mixin.html#validation-property-type" class="sidebar-link">Validation property type</a></li></ul></li><li class="sidebar-sub-header"><a href="/vueent/guide/validate-mixin.html#model-definition" class="sidebar-link">Model definition</a></li><li class="sidebar-sub-header"><a href="/vueent/guide/validate-mixin.html#usage" class="sidebar-link">Usage</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vueent/guide/validate-mixin.html#nesting-levels-with-flags-options-and-methods" class="sidebar-link">Nesting levels with flags, options, and methods</a></li></ul></li><li class="sidebar-sub-header"><a href="/vueent/guide/validate-mixin.html#combination-with-the-save-and-the-rollback-mixins" class="sidebar-link">Combination with the Save and the Rollback mixins</a></li><li class="sidebar-sub-header"><a href="/vueent/guide/validate-mixin.html#v9s-integration" class="sidebar-link">v9s integration</a></li></ul></li><li><a href="/vueent/guide/models-and-components.html" class="sidebar-link">Models and components</a></li><li><a href="/vueent/guide/mixins-development.html" class="sidebar-link">Mixins development</a></li><li><a href="/vueent/guide/tips-and-tricks.html" class="sidebar-link">Tips and tricks</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Store</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="validate-mixin"><a href="#validate-mixin" class="header-anchor">#</a> Validate mixin</h1> <p>The <code>validate</code> mixin appends a reactive validation to the model data. It allows to dynamically validate data fields and provides validation error messages.</p> <h2 id="validation-pattern"><a href="#validation-pattern" class="header-anchor">#</a> Validation pattern</h2> <p>A validation pattern consists of two parts: a constant object with validation rules and a type of generated model validation property.</p> <h3 id="validation-rule"><a href="#validation-rule" class="header-anchor">#</a> Validation rule</h3> <p>Validation rule is a function that receives several parameters, including a value of the model data field, and returns a boolean result or an error message:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">/**
 * A function type that checks a value from the data path and returns a result.
 *
 * @param value - checking data field
 * @param data - model data
 * @param path - field path
 * @returns - validation result
 */</span>
<span class="token keyword">type</span> <span class="token class-name">ValidationRule</span> <span class="token operator">=</span> <span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> data<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">,</span> path<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">boolean</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
</code></pre></div><p>For example, let's write an age validation rule:</p> <!----> <h3 id="validation-rules-object"><a href="#validation-rules-object" class="header-anchor">#</a> Validation rules object</h3> <p>Rules should be placed into an object corresponding to the model data:</p> <!----> <p>Rules of internal objects and arrays may be declared using <code>$sub</code>, <code>$each</code>, and <code>$self</code> reserved words.</p> <ul><li><code>$sub</code> defines a rules set of the internal object fields</li> <li><code>$each</code> defines a rules set of each item of the internal array</li> <li><code>$self</code> defines a rule of the entire object or array</li></ul> <!----> <h3 id="validation-property-type"><a href="#validation-property-type" class="header-anchor">#</a> Validation property type</h3> <p>A validation property type provides a type helper corresponding to the model data type. This type can be defined manually (e.g. for recursive types) and calculated automatically using <code>PatternAssert</code>.</p> <p>The manual definition must be based on <code>ValidationBase</code> type:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> ValidationBase <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vueent/mix-models'</span><span class="token punctuation">;</span>

<span class="token comment">// ... definitions of the `Data` type and the `validations` object.</span>

<span class="token keyword">interface</span> <span class="token class-name">CredentialsValidations</span> <span class="token keyword">extends</span> <span class="token class-name">ValidationBase</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> c<span class="token operator">:</span> <span class="token punctuation">{</span>
    firstName<span class="token operator">:</span> ValidationBase<span class="token punctuation">;</span>
    lastName<span class="token operator">:</span> ValidationBase<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">PhoneValidations</span> <span class="token keyword">extends</span> <span class="token class-name">ValidationBase</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> c<span class="token operator">:</span> <span class="token punctuation">{</span>
    value<span class="token operator">:</span> ValidationBase<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">PhonesValidations</span> <span class="token keyword">extends</span> <span class="token class-name">ValidationBase</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> c<span class="token operator">:</span> PhoneValidations<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Validations</span> <span class="token keyword">extends</span> <span class="token class-name">ValidationBase</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> c<span class="token operator">:</span> <span class="token punctuation">{</span>
    age<span class="token operator">:</span> ValidationBase<span class="token punctuation">;</span>
    credentials<span class="token operator">:</span> CredentialsValidations<span class="token punctuation">;</span>
    phones<span class="token operator">:</span> PhonesValidations<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The calculated definifion uses a model data type and a validation rules object:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> PatternAssert <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vueent/mix-models'</span><span class="token punctuation">;</span>

<span class="token comment">// ... definitions of the `Data` type and the `validations` object.</span>

<span class="token keyword">type</span> <span class="token class-name">Validations</span> <span class="token operator">=</span> PatternAssert<span class="token operator">&lt;</span><span class="token keyword">typeof</span> validations<span class="token punctuation">,</span> Data<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre></div><p>The two definitions above are equal.</p> <h2 id="model-definition"><a href="#model-definition" class="header-anchor">#</a> Model definition</h2> <p>The mixin provides a factory function that returns a mixin function. The following example presents a typical use of the <code>validate</code> mixin:</p> <!----> <p>The mixin is most useful with TypeScript, because it allows a developer to use the validations autocompletion.</p> <h2 id="usage"><a href="#usage" class="header-anchor">#</a> Usage</h2> <p>A model instance with <code>validate</code> mixin has two equal properties <code>validations</code> and <code>v</code>. The <code>validations</code> property is of type <code>ValidationBase</code>, while the <code>v</code> property is of user-defined type <code>Validations</code> (see <a href="#validation-property-type">above</a>):</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> instance <span class="token operator">=</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

instance<span class="token punctuation">.</span>v<span class="token punctuation">.</span>c<span class="token punctuation">.</span> <span class="token comment">// | Autocomplition</span>
<span class="token comment">//               | age</span>
<span class="token comment">//               | credentials</span>
<span class="token comment">//               | phones</span>

instance<span class="token punctuation">.</span>v<span class="token punctuation">.</span>c<span class="token punctuation">.</span>phones<span class="token punctuation">.</span>c<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>c<span class="token punctuation">.</span> <span class="token comment">// | Autocomplition</span>
<span class="token comment">//                             | value</span>
</code></pre></div><h3 id="nesting-levels-with-flags-options-and-methods"><a href="#nesting-levels-with-flags-options-and-methods" class="header-anchor">#</a> Nesting levels with flags, options, and methods</h3> <p><code>v</code>/<code>validations</code> object is divided into levels according to the data model structure and is synchronously updated when it changes. Because any validated field contains many flags, options, and methods, each sublevel is accessible through a <code>c</code> or an untyped <code>children</code> property. Every validation object (including the root property <code>v</code>/<code>validations</code>) contains the following flags and methods:</p> <ul><li><code>c</code>/<code>children</code> - children validations</li> <li><code>anyChildDirty</code> - indicating that at least one of children has the dirty flag</li> <li><code>selfDirty</code> - indicating that the current data field is dirty</li> <li><code>dirty</code> - indicating that the current data field or one of children is dirty</li> <li><code>anyChildInvalid</code> - indicating that at least on of children has the invalid flag</li> <li><code>selfInvalid</code> - indicating that validation of the current data field failed</li> <li><code>invalid</code> - indicating the validation of the current data field or one of children failed</li> <li><code>message</code> - validation error test</li> <li><code>dirtyMessage</code> - validation error text, which is specified only if the <code>dirty</code> flag is set</li> <li><code>touch()</code> - marks the current data field is dirty</li> <li><code>reset()</code> - resets the current validation state to default values</li> <li><code>checkValue()</code> - compares the specified value with the cached value of the current data field</li> <li><code>destroy()</code> - destroys the current validation instance and its children (should not be called manually)</li></ul> <p>The following example demonstrates a usage of the model, defined above:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> instance <span class="token operator">=</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>v<span class="token punctuation">.</span>c<span class="token punctuation">.</span>age<span class="token punctuation">.</span>dirty<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// outputs: false</span>

instance<span class="token punctuation">.</span>data<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>v<span class="token punctuation">.</span>c<span class="token punctuation">.</span>age<span class="token punctuation">.</span>dirty<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// outputs: false</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>v<span class="token punctuation">.</span>c<span class="token punctuation">.</span>age<span class="token punctuation">.</span>invalid<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// outputs: false</span>

instance<span class="token punctuation">.</span>v<span class="token punctuation">.</span>c<span class="token punctuation">.</span>age<span class="token punctuation">.</span><span class="token function">touch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>v<span class="token punctuation">.</span>c<span class="token punctuation">.</span>age<span class="token punctuation">.</span>dirty<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// outputs: true</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>v<span class="token punctuation">.</span>c<span class="token punctuation">.</span>age<span class="token punctuation">.</span>invalid<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// outputs: false</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>v<span class="token punctuation">.</span>c<span class="token punctuation">.</span>age<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// outputs: ''</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>v<span class="token punctuation">.</span>c<span class="token punctuation">.</span>age<span class="token punctuation">.</span>dirtyMessage<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// outputs: ''</span>

instance<span class="token punctuation">.</span>data<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>v<span class="token punctuation">.</span>c<span class="token punctuation">.</span>age<span class="token punctuation">.</span>dirty<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// outputs: true</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>v<span class="token punctuation">.</span>c<span class="token punctuation">.</span>age<span class="token punctuation">.</span>invalid<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// outputs: true</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>v<span class="token punctuation">.</span>c<span class="token punctuation">.</span>age<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// outputs: &quot;Age cannot be a negative value.&quot;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>v<span class="token punctuation">.</span>c<span class="token punctuation">.</span>age<span class="token punctuation">.</span>dirtyMessage<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// outputs: &quot;Age cannot be a negative value.&quot;</span>

<span class="token comment">// do not use push and splice, it breaks reactivity.</span>
instance<span class="token punctuation">.</span>data<span class="token punctuation">.</span>phones <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>instance<span class="token punctuation">.</span>data<span class="token punctuation">.</span>phones<span class="token punctuation">,</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token string">'+155533344'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// some children are invalid.</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>v<span class="token punctuation">.</span>invalid<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// outputs: true</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>v<span class="token punctuation">.</span>dirty<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// outputs: true</span>

<span class="token comment">// autotouch is not enabled.</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>v<span class="token punctuation">.</span>c<span class="token punctuation">.</span>phones<span class="token punctuation">.</span>c<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>c<span class="token punctuation">.</span>value<span class="token punctuation">.</span>dirty<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// outputs: false</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>v<span class="token punctuation">.</span>c<span class="token punctuation">.</span>phones<span class="token punctuation">.</span>c<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>c<span class="token punctuation">.</span>value<span class="token punctuation">.</span>invalid<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// outputs: true</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>v<span class="token punctuation">.</span>c<span class="token punctuation">.</span>phones<span class="token punctuation">.</span>c<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>c<span class="token punctuation">.</span>value<span class="token punctuation">.</span>dirtyMessage<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// outputs: &quot;&quot;</span>

instance<span class="token punctuation">.</span>v<span class="token punctuation">.</span>c<span class="token punctuation">.</span>phones<span class="token punctuation">.</span>c<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>c<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">touch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>v<span class="token punctuation">.</span>c<span class="token punctuation">.</span>phones<span class="token punctuation">.</span>c<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>c<span class="token punctuation">.</span>value<span class="token punctuation">.</span>dirty<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// outputs: true</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>v<span class="token punctuation">.</span>c<span class="token punctuation">.</span>phones<span class="token punctuation">.</span>c<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>c<span class="token punctuation">.</span>value<span class="token punctuation">.</span>dirtyMessage<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// outputs: &quot;Invalid phone number format.&quot;</span>

instance<span class="token punctuation">.</span>data<span class="token punctuation">.</span>phones<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">'+15553334411'</span><span class="token punctuation">;</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>v<span class="token punctuation">.</span>c<span class="token punctuation">.</span>phones<span class="token punctuation">.</span>c<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>c<span class="token punctuation">.</span>value<span class="token punctuation">.</span>invalid<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// outputs: false</span>

instance<span class="token punctuation">.</span>v<span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// reset validations</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>v<span class="token punctuation">.</span>dirty<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// outputs: false</span>

instance<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="combination-with-the-save-and-the-rollback-mixins"><a href="#combination-with-the-save-and-the-rollback-mixins" class="header-anchor">#</a> Combination with the Save and the Rollback mixins</h2> <p>Validation properties will be reset when the model instance is saved or rolled back.</p> <!----> <h2 id="v9s-integration"><a href="#v9s-integration" class="header-anchor">#</a> v9s integration</h2> <p>Our side project <a href="https://vueent.github.io/v9s/" target="_blank" rel="noopener noreferrer">v9s<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> can be integrated with the <code>validate</code> mixin to make model definition more declarative. For example, let's rewrite the model from the page:</p> <!----></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/vueent/guide/rollback-mixin.html" class="prev">
        Rollback mixin
      </a></span> <span class="next"><a href="/vueent/guide/models-and-components.html">
        Models and components
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/vueent/assets/js/app.f7b1e8a0.js" defer></script><script src="/vueent/assets/js/2.3fc2d328.js" defer></script><script src="/vueent/assets/js/1.4e5a82d0.js" defer></script><script src="/vueent/assets/js/35.b3861d2b.js" defer></script><script src="/vueent/assets/js/6.18f065b5.js" defer></script>
  </body>
</html>
